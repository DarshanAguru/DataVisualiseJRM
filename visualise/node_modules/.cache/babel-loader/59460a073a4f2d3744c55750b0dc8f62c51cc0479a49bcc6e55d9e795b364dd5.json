{"ast":null,"code":"import'./Dashboard.css';import{useState,useMemo,useEffect}from'react';import BarChart from'./BarChart';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const baseurl=\"http://localhost:9000/api/data\";export default function EYvsP(){const[endYearList,setEndyearList]=useState([]);const[endyear,setEndyear]=useState(2018);const handlechange=selEy=>{setEndyear(selEy.target.value);// console.log(selcountry.target.value);\n};useMemo(()=>{fetch(baseurl+'/endyearlist').then(response=>response.json()).then(json=>{var data=[];for(let i=0;i<json.length;i++){data.push({id:i,value:json[i],label:json[i]});}setEndyearList(data);// console.log(countryList);\n}).catch(error=>{console.log(\"err\");});},[]);const[chartdata,setChartData]=useState({label:['a','b','c','d'],datasets:[{title:\"Barchart\",data:[1,2,3,4],backgroundColor:['#ff0000'],borderWidth:1}]});useEffect(()=>{fetch(\"\".concat(baseurl,\"/endyear/\").concat(endyear)).then(response=>response.json()).then(json=>{let dataset=new Map();for(let i=0;i<json.length;i++){if(json[i].pestle!==\"Nan\"){if(dataset.has(json[i].pestle)){let cnt=dataset.get(json[i].pestle)+1;dataset.set(json[i].pestle,cnt);}else{dataset.set(json[i].pestle,1);}}}let labels=[];let values=[];dataset.forEach((k,v)=>{labels.push(v);values.push(k);});console.log(labels);var chartdata={labels:labels,datasets:[{label:\"No. of Published articles\",data:values,backgroundColor:'#4bcbeb',borderColor:'#000',borderWidth:1}]};setChartData(chartdata);}).catch(error=>{console.log(error);});},[endyear]);return/*#__PURE__*/_jsxs(\"div\",{className:\"chart1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"filter\",children:\"End Year : \"}),/*#__PURE__*/_jsx(\"select\",{style:{\"border\":\"2px solid #4bcbeb\"},className:\"select-box\",value:endyear,onChange:handlechange,children:endYearList.map(option=>/*#__PURE__*/_jsx(\"option\",{value:option.value,children:option.label}))}),/*#__PURE__*/_jsx(BarChart,{chartData:chartdata,title:\"No. of articles published on Pestles at selected Endyear\",desc:\"No. of articles published on Pestles at selected end-year\"})]});}","map":{"version":3,"names":["useState","useMemo","useEffect","BarChart","jsx","_jsx","jsxs","_jsxs","baseurl","EYvsP","endYearList","setEndyearList","endyear","setEndyear","handlechange","selEy","target","value","fetch","then","response","json","data","i","length","push","id","label","catch","error","console","log","chartdata","setChartData","datasets","title","backgroundColor","borderWidth","concat","dataset","Map","pestle","has","cnt","get","set","labels","values","forEach","k","v","borderColor","className","children","style","onChange","map","option","chartData","desc"],"sources":["E:/MJR/visualise/src/EYvsP.js"],"sourcesContent":["import './Dashboard.css';\r\nimport { useState, useMemo, useEffect} from 'react';\r\nimport BarChart from './BarChart';\r\n\r\n\r\nconst baseurl = \"http://localhost:9000/api/data\";\r\n\r\n\r\n\r\n\r\n\r\nexport default function EYvsP()\r\n{\r\n    const[endYearList, setEndyearList] = useState([]);\r\n    const[endyear, setEndyear] = useState(2018);\r\n\r\n    const handlechange = (selEy) =>{\r\n        setEndyear(selEy.target.value);\r\n        // console.log(selcountry.target.value);\r\n    }\r\n \r\n\r\n    useMemo(()=>{fetch(baseurl+'/endyearlist')\r\n    .then(\r\n        (response)=> response.json()\r\n    )\r\n    .then(\r\n        (json) => {\r\n\r\n            var data = []\r\n          \r\n            for(let i = 0; i < json.length; i++)\r\n            {\r\n                data.push({id: i,value:json[i], label:json[i]});\r\n                   \r\n            } \r\n            setEndyearList(data);\r\n            \r\n            // console.log(countryList);\r\n        }\r\n    )\r\n    .catch(\r\n        (error)=>{console.log(\"err\")}\r\n    );},[]);\r\n \r\n\r\n    const[chartdata , setChartData] = useState({\r\n        label : ['a','b','c','d'],\r\n        datasets: [\r\n            {\r\n                title :\"Barchart\",\r\n                data :  [1,2,3,4],\r\n                backgroundColor : ['#ff0000'],\r\n                borderWidth: 1,\r\n            }\r\n        ]\r\n        });\r\n    \r\n    useEffect(()=>{\r\n        fetch(`${baseurl}/endyear/${endyear}`)\r\n        .then((response)=> response.json()\r\n        ).then((json)=>{\r\n                \r\n                let dataset = new Map();\r\n                for(let i = 0 ; i < json.length ; i++)\r\n                {\r\n                    if(json[i].pestle !== \"Nan\")\r\n                    {\r\n                    if(dataset.has(json[i].pestle))\r\n                    {\r\n                        let cnt = dataset.get(json[i].pestle) + 1;\r\n                        dataset.set(json[i].pestle, cnt);\r\n                    }\r\n                    else{\r\n                        dataset.set(json[i].pestle,1);\r\n                    }\r\n                    }\r\n                }\r\n\r\n                let labels = [];\r\n                let values = [];\r\n                \r\n                dataset.forEach((k,v)=>{\r\n                    labels.push(v);\r\n                    values.push(k);\r\n                });\r\n                console.log(labels);\r\n                var chartdata = {\r\n                    labels : labels,\r\n                    datasets: [\r\n                        {\r\n                            label :\"No. of Published articles\",\r\n                            data :  values,\r\n                            backgroundColor: '#4bcbeb',\r\n                            borderColor: '#000',\r\n                            borderWidth: 1,\r\n                        }\r\n                    ]\r\n                    };\r\n                \r\n                    setChartData(chartdata);\r\n                \r\n        \r\n        })\r\n        .catch((error)=>{console.log(error)});\r\n    },[endyear]);\r\n    \r\n\r\n    \r\n\r\n\r\n\r\n    return (\r\n        <div className=\"chart1\">\r\n              <span className='filter'>End Year : </span> \r\n              <select style = {{\"border\": \"2px solid #4bcbeb\"}} className='select-box' value={endyear}  onChange={handlechange}>{endYearList.map((option) => (<option value={option.value}>{option.label}</option>))}</select>\r\n                <BarChart chartData= {chartdata} title=\"No. of articles published on Pestles at selected Endyear\" desc=\"No. of articles published on Pestles at selected end-year\"/>\r\n        </div>\r\n    );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}