{"ast":null,"code":"import'./Dashboard.css';import{useState,useMemo,useEffect}from'react';import BarChart from'./BarChart';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const baseurl=\"http://localhost:9000/api/data\";export default function TvsP(){const[topicList,setTopicList]=useState([]);const[topic,setTopic]=useState(\"artificial intelligence\");const handlechange=selTopic=>{setTopic(selTopic.target.value);// console.log(selcountry.target.value);\n};useMemo(()=>{fetch(baseurl+'/topiclist').then(response=>response.json()).then(json=>{var data=[];for(let i=0;i<json.length;i++){data.push({id:i,value:json[i],label:json[i]});}setTopicList(data);// console.log(countryList);\n}).catch(error=>{console.log(\"err\");});},[]);const[chartdata,setChartData]=useState({label:['a','b','c','d'],datasets:[{title:\"Barchart\",data:[1,2,3,4],backgroundColor:['#ff0000'],borderWidth:1}]});useEffect(()=>{fetch(\"\".concat(baseurl,\"/topic/\").concat(topic)).then(response=>response.json()).then(json=>{let dataset=new Map();for(let i=0;i<json.length;i++){if(dataset.has(json[i].endYear)){let cnt=dataset.get(json[i].endYear)+1;dataset.set(json[i].endYear,cnt);}else{dataset.set(json[i].endYear,1);}}let labels=[];let values=[];dataset.forEach((k,v)=>{labels.push(v);values.push(k);});console.log(labels);var chartdata={labels:labels,datasets:[{label:\"No. of Published articles\",data:values,backgroundColor:'#a05aff',borderColor:'#000',borderWidth:1}]};setChartData(chartdata);}).catch(error=>{console.log(error);});},[topic]);return/*#__PURE__*/_jsxs(\"div\",{className:\"chart1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"filter\",children:\"Topic : \"}),/*#__PURE__*/_jsx(\"select\",{style:{\"border\":\"2px solid #a05aff\"},className:\"select-box\",value:topic,onChange:handlechange,children:topicList.map(option=>/*#__PURE__*/_jsx(\"option\",{value:option.value,children:option.label}))}),/*#__PURE__*/_jsx(BarChart,{chartData:chartdata,title:\"No. of articles published on selected Topic (Endyear-wise)\",desc:\"No. of articles published on selected Topic (year-wise)\"})]});}","map":{"version":3,"names":["useState","useMemo","useEffect","BarChart","jsx","_jsx","jsxs","_jsxs","baseurl","TvsP","topicList","setTopicList","topic","setTopic","handlechange","selTopic","target","value","fetch","then","response","json","data","i","length","push","id","label","catch","error","console","log","chartdata","setChartData","datasets","title","backgroundColor","borderWidth","concat","dataset","Map","has","endYear","cnt","get","set","labels","values","forEach","k","v","borderColor","className","children","style","onChange","map","option","chartData","desc"],"sources":["E:/MJR/visualise/src/TvsP.js"],"sourcesContent":["import './Dashboard.css';\r\nimport { useState, useMemo, useEffect} from 'react';\r\nimport BarChart from './BarChart';\r\n\r\n\r\nconst baseurl = \"http://localhost:9000/api/data\";\r\n\r\n\r\n\r\n\r\n\r\nexport default function TvsP()\r\n{\r\n    const[topicList, setTopicList] = useState([]);\r\n    const[topic, setTopic] = useState(\"artificial intelligence\");\r\n\r\n    const handlechange = (selTopic) =>{\r\n        setTopic(selTopic.target.value);\r\n        // console.log(selcountry.target.value);\r\n    }\r\n \r\n\r\n    useMemo(()=>{fetch(baseurl+'/topiclist')\r\n    .then(\r\n        (response)=> response.json()\r\n    )\r\n    .then(\r\n        (json) => {\r\n\r\n            var data = []\r\n          \r\n            for(let i = 0; i < json.length; i++)\r\n            {\r\n                data.push({id: i,value:json[i], label:json[i]});\r\n                   \r\n            } \r\n            setTopicList(data);\r\n            \r\n            // console.log(countryList);\r\n        }\r\n    )\r\n    .catch(\r\n        (error)=>{console.log(\"err\")}\r\n    );},[]);\r\n \r\n\r\n    const[chartdata , setChartData] = useState({\r\n        label : ['a','b','c','d'],\r\n        datasets: [\r\n            {\r\n                title :\"Barchart\",\r\n                data :  [1,2,3,4],\r\n                backgroundColor : ['#ff0000'],\r\n                borderWidth: 1,\r\n            }\r\n        ]\r\n        });\r\n    \r\n    useEffect(()=>{\r\n        fetch(`${baseurl}/topic/${topic}`)\r\n        .then((response)=> response.json()\r\n        ).then((json)=>{\r\n                \r\n                let dataset = new Map();\r\n                for(let i = 0 ; i < json.length ; i++)\r\n                {\r\n                    \r\n                    if(dataset.has(json[i].endYear))\r\n                    {\r\n                        let cnt = dataset.get(json[i].endYear) + 1;\r\n                        dataset.set(json[i].endYear, cnt);\r\n                    }\r\n                    else{\r\n                        dataset.set(json[i].endYear,1);\r\n                    }\r\n                    \r\n                }\r\n\r\n                let labels = [];\r\n                let values = [];\r\n                \r\n                dataset.forEach((k,v)=>{\r\n                    labels.push(v);\r\n                    values.push(k);\r\n                });\r\n                console.log(labels);\r\n                var chartdata = {\r\n                    labels : labels,\r\n                    datasets: [\r\n                        {\r\n                            label :\"No. of Published articles\",\r\n                            data :  values,\r\n                            backgroundColor: '#a05aff',\r\n                            borderColor: '#000',\r\n                            borderWidth: 1,\r\n                        }\r\n                    ]\r\n                    };\r\n                \r\n                    setChartData(chartdata);\r\n                \r\n        \r\n        })\r\n        .catch((error)=>{console.log(error)});\r\n    },[topic]);\r\n    \r\n\r\n    \r\n\r\n\r\n\r\n    return (\r\n        <div className=\"chart1\">\r\n              <span className='filter'>Topic : </span> \r\n              <select style = {{\"border\": \"2px solid #a05aff\"}} className='select-box' value={topic}  onChange={handlechange}>{topicList.map((option) => (<option value={option.value}>{option.label}</option>))}</select>\r\n                <BarChart chartData= {chartdata} title=\"No. of articles published on selected Topic (Endyear-wise)\" desc=\"No. of articles published on selected Topic (year-wise)\"/>\r\n        </div>\r\n    );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}